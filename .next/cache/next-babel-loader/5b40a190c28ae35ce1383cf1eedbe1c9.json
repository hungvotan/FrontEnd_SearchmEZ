{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/hung.vt/Documents/Hungvotan/Projects/searchmez/FrontEnd_SearchmEZ/components/shared/headers/modules/SearchHeader.jsx\",\n    _s = $RefreshSig$(),\n    _this = this,\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { Spin } from 'antd';\nimport ProductRepository from '~/repositories/ProductRepository';\nimport ProductSearchResult from '~/components/elements/products/ProductSearchResult';\nvar exampleCategories = ['All', 'Animals', 'Apparels', 'Auction', 'Automobiles', 'Blogs', 'Booking', 'Coupon', 'Edibles', 'Events', 'General Listing', 'Jobs', 'Meetups', 'People', 'Places', 'Real Estate', 'Services', 'Products', 'Web Directory'];\n\nfunction useDebounce(value, delay) {\n  _s();\n\n  var _useState = useState(value),\n      debouncedValue = _useState[0],\n      setDebouncedValue = _useState[1];\n\n  useEffect(function () {\n    // Update debounced value after delay\n    var handler = setTimeout(function () {\n      setDebouncedValue(value);\n    }, delay);\n    return function () {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n}\n\n_s(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\n\nvar SearchHeader = function SearchHeader() {\n  _s2();\n\n  var inputEl = useRef(null);\n\n  var _useState2 = useState(false),\n      isSearch = _useState2[0],\n      setIsSearch = _useState2[1];\n\n  var _useState3 = useState(''),\n      keyword = _useState3[0],\n      setKeyword = _useState3[1];\n\n  var _useState4 = useState(null),\n      resultItems = _useState4[0],\n      setResultItems = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var debouncedSearchTerm = useDebounce(keyword, 300);\n\n  function handleClearKeyword() {\n    setKeyword('');\n    setIsSearch(false);\n    setLoading(false);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    Router.push(\"/search?keyword=\".concat(keyword));\n  }\n\n  useEffect(function () {\n    if (debouncedSearchTerm) {\n      setLoading(true);\n\n      if (keyword) {\n        var queries = {\n          _limit: 5,\n          title_contains: keyword\n        };\n        var products = ProductRepository.getRecords(queries);\n        products.then(function (result) {\n          console.log(result);\n          setLoading(false);\n          setResultItems(result);\n          setIsSearch(true);\n        });\n      } else {\n        setIsSearch(false);\n        setKeyword('');\n      }\n\n      if (loading) {\n        setIsSearch(false);\n      }\n    } else {\n      setLoading(false);\n      setIsSearch(false);\n    }\n  }, [debouncedSearchTerm]); // Views\n\n  var productItemsView, clearTextView, selectOptionView, loadingView, loadMoreView;\n\n  if (!loading) {\n    if (resultItems && resultItems.length > 0) {\n      if (resultItems.length > 5) {\n        loadMoreView = /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ps-panel__footer text-center\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/search\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"See all results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, _this);\n      }\n\n      productItemsView = resultItems.map(function (product) {\n        return /*#__PURE__*/_jsxDEV(ProductSearchResult, {\n          product: product\n        }, product.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, _this);\n      });\n    } else {\n      productItemsView = /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No product found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 32\n      }, _this);\n    }\n\n    if (keyword !== '') {\n      clearTextView = /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ps-form__action\",\n        onClick: handleClearKeyword,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"icon icon-cross2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, _this);\n    }\n  } else {\n    loadingView = /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"ps-form__action\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, _this);\n  }\n\n  selectOptionView = exampleCategories.map(function (option) {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: option,\n      children: option\n    }, option, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, _this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"ps-form--quick-search\",\n    method: \"get\",\n    action: \"/\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ps-form__categories\",\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-control\",\n        children: selectOptionView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ps-form__input\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputEl,\n        className: \"form-control\",\n        type: \"text\",\n        value: keyword,\n        placeholder: \"I'm listing for...\",\n        onChange: function onChange(e) {\n          return setKeyword(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, _this), clearTextView, loadingView]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ps-panel--search-result\".concat(isSearch ? ' active ' : ''),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ps-panel__content\",\n        children: productItemsView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, _this), loadMoreView]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, _this);\n};\n\n_s2(SearchHeader, \"pgaIte9YuK6zs2Hv/mk5eZHdrQk=\", false, function () {\n  return [useDebounce];\n});\n\n_c = SearchHeader;\nexport default SearchHeader;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchHeader\");","map":{"version":3,"sources":["/Users/hung.vt/Documents/Hungvotan/Projects/searchmez/FrontEnd_SearchmEZ/components/shared/headers/modules/SearchHeader.jsx"],"names":["React","useEffect","useRef","useState","Link","Router","Spin","ProductRepository","ProductSearchResult","exampleCategories","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","SearchHeader","inputEl","isSearch","setIsSearch","keyword","setKeyword","resultItems","setResultItems","loading","setLoading","debouncedSearchTerm","handleClearKeyword","handleSubmit","e","preventDefault","push","queries","_limit","title_contains","products","getRecords","then","result","console","log","productItemsView","clearTextView","selectOptionView","loadingView","loadMoreView","length","map","product","id","option","target"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { Spin } from 'antd';\nimport ProductRepository from '~/repositories/ProductRepository';\nimport ProductSearchResult from '~/components/elements/products/ProductSearchResult';\n\nconst exampleCategories = [\n    'All',\n    'Animals',\n    'Apparels',\n    'Auction',\n    'Automobiles',\n    'Blogs',\n    'Booking',\n    'Coupon',\n    'Edibles',\n    'Events',\n    'General Listing',\n    'Jobs',\n    'Meetups',\n    'People',\n    'Places',\n    'Real Estate',\n    'Services',\n    'Products',\n    'Web Directory'\n];\n\nfunction useDebounce(value, delay) {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(() => {\n        // Update debounced value after delay\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return debouncedValue;\n}\n\nconst SearchHeader = () => {\n    const inputEl = useRef(null);\n    const [isSearch, setIsSearch] = useState(false);\n    const [keyword, setKeyword] = useState('');\n    const [resultItems, setResultItems] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const debouncedSearchTerm = useDebounce(keyword, 300);\n\n    function handleClearKeyword() {\n        setKeyword('');\n        setIsSearch(false);\n        setLoading(false);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        Router.push(`/search?keyword=${keyword}`);\n    }\n\n    useEffect(() => {\n        if (debouncedSearchTerm) {\n            setLoading(true);\n            if (keyword) {\n                const queries = {\n                    _limit: 5,\n                    title_contains: keyword,\n                };\n                const products = ProductRepository.getRecords(queries);\n                products.then((result) => {\n                    console.log(result);\n                    setLoading(false);\n                    setResultItems(result);\n                    setIsSearch(true);\n                });\n            } else {\n                setIsSearch(false);\n                setKeyword('');\n            }\n            if (loading) {\n                setIsSearch(false);\n            }\n        } else {\n            setLoading(false);\n            setIsSearch(false);\n        }\n    }, [debouncedSearchTerm]);\n\n    // Views\n    let productItemsView,\n        clearTextView,\n        selectOptionView,\n        loadingView,\n        loadMoreView;\n    if (!loading) {\n        if (resultItems && resultItems.length > 0) {\n            if (resultItems.length > 5) {\n                loadMoreView = (\n                    <div className=\"ps-panel__footer text-center\">\n                        <Link href=\"/search\">\n                            <a>See all results</a>\n                        </Link>\n                    </div>\n                );\n            }\n            productItemsView = resultItems.map((product) => (\n                <ProductSearchResult product={product} key={product.id} />\n            ));\n        } else {\n            productItemsView = <p>No product found.</p>;\n        }\n        if (keyword !== '') {\n            clearTextView = (\n                <span className=\"ps-form__action\" onClick={handleClearKeyword}>\n                    <i className=\"icon icon-cross2\"></i>\n                </span>\n            );\n        }\n    } else {\n        loadingView = (\n            <span className=\"ps-form__action\">\n                <Spin size=\"small\" />\n            </span>\n        );\n    }\n\n    selectOptionView = exampleCategories.map((option) => (\n        <option value={option} key={option}>\n            {option}\n        </option>\n    ));\n\n    return (\n        <form\n            className=\"ps-form--quick-search\"\n            method=\"get\"\n            action=\"/\"\n            onSubmit={handleSubmit}>\n            <div className=\"ps-form__categories\">\n                <select className=\"form-control\">{selectOptionView}</select>\n            </div>\n            <div className=\"ps-form__input\">\n                <input\n                    ref={inputEl}\n                    className=\"form-control\"\n                    type=\"text\"\n                    value={keyword}\n                    placeholder=\"I'm listing for...\"\n                    onChange={(e) => setKeyword(e.target.value)}\n                />\n                {clearTextView}\n                {loadingView}\n            </div>\n            <button onClick={handleSubmit}>Search</button>\n            <div\n                className={`ps-panel--search-result${\n                    isSearch ? ' active ' : ''\n                }`}>\n                <div className=\"ps-panel__content\">{productItemsView}</div>\n                {loadMoreView}\n            </div>\n        </form>\n    );\n};\n\nexport default SearchHeader;\n"]},"metadata":{},"sourceType":"module"}